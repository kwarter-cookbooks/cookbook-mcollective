topicprefix = /topic/
main_collective = <%= @config['main_collective'] %>
collectives = <%= @config['collectives'] %>
direct_addressing = <%= @config['direct_addressing'] %>
libdir = <%= @site_plugins %>:<%= @config['libdir'] %>
logfile = /dev/null
loglevel = info

# Plugins
securityprovider = <%= @config['securityprovider'] %>
<%- if @config['securityprovider'] == "psk" %>
plugin.psk = <%= @config['psk'] %>
<%- end %>

connector = <%= @config['connector'] %>
plugin.<%= @config['connector'] %>.vhost = <%= @config['rabbitmq']['vhost'] %>
plugin.<%= @config['connector'] %>.pool.size = 1
plugin.<%= @config['connector'] %>.pool.1.host = <%= @config['rabbitmq']['host'] %>
plugin.<%= @config['connector'] %>.pool.1.port = <%= @config['rabbitmq']['port'] %>
plugin.<%= @config['connector'] %>.pool.1.user = <%= @config['rabbitmq']['username'] %>
plugin.<%= @config['connector'] %>.pool.1.password = <%= @config['rabbitmq']['password'] %>
#plugin.<%= @config['connector'] %>.pool.1.ssl = 1
#plugin.<%= @config['connector'] %>.pool.1.ssl.ca = /var/lib/puppet/ssl/certs/ca.pem
#plugin.<%= @config['connector'] %>.pool.1.ssl.cert = /var/lib/puppet/ssl/certs/web01.example.com.pem
#plugin.<%= @config['connector'] %>.pool.1.ssl.key = /var/lib/puppet/ssl/private_keys/web01.example.com.pem
#plugin.<%= @config['connector'] %>.pool.1.ssl.fallback = 0

# Facts
<% if @config['factsource'] == 'ohai' %>
factsource = opscodeohai
fact_cache_time = 300
<% else %>
factsource = yaml
plugin.yaml = <%= @config['yaml_factfile'] %>
<% end %>

# Performance settings:

direct_addressing_threshold = <%= @config['direct_addressing_threshold'] %>
ttl = <%= @config['ttl'] %>
